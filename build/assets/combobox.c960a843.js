import{u as w,x as Q,q as P,y as W,s as G,c as X,d as Y,e as Z,V,w as q,t as j,b as ee,h as T,R as L,v as oe,p as te,O as ae,z as M,g as I}from"./AppLayout.c471b81a.js";import{d as le,e as ne}from"./switch.67ed66d7.js";import{x as A,d as D,v as S,Q as v,k as K,F as ue,m as z,y as _,q as U,z as ie,l as re,p as se,s as $}from"./app.c9482037.js";function pe(t,x){return t===x}var de=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(de||{}),ve=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(ve||{}),be=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(be||{});let J=Symbol("ComboboxContext");function F(t){let x=re(J,null);if(x===null){let g=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(g,F),g}return x}let xe=A({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>pe},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},name:{type:String},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:x,attrs:g,emit:h}){let e=D(1),o=D(null),b=D(null),R=D(null),O=D(null),p=D({static:!1,hold:!1}),l=D([]),f=D(null),a=D(1),c=D(!1);function s(u=r=>r){let r=f.value!==null?l.value[f.value]:null,i=ae(u(l.value.slice()),m=>T(m.dataRef.domRef)),n=r?i.indexOf(r):null;return n===-1&&(n=null),{options:i,activeOptionIndex:n}}let y=S(()=>t.multiple?1:0),k=S(()=>t.nullable),[B,E]=le(S(()=>t.modelValue),u=>h("update:modelValue",u),S(()=>t.defaultValue)),d={comboboxState:e,value:B,mode:y,compare(u,r){if(typeof t.by=="string"){let i=t.by;return(u==null?void 0:u[i])===(r==null?void 0:r[i])}return t.by(u,r)},nullable:k,inputRef:b,labelRef:o,buttonRef:R,optionsRef:O,disabled:S(()=>t.disabled),options:l,change(u){E(u)},activeOptionIndex:S(()=>{if(c.value&&f.value===null&&l.value.length>0){let u=l.value.findIndex(r=>!r.dataRef.disabled);if(u!==-1)return u}return f.value}),activationTrigger:a,optionsPropsRef:p,closeCombobox(){c.value=!1,!t.disabled&&e.value!==1&&(e.value=1,f.value=null)},openCombobox(){if(c.value=!0,t.disabled||e.value===0)return;let u=l.value.findIndex(r=>{let i=v(r.dataRef.value);return w(y.value,{[0]:()=>d.compare(v(d.value.value),v(i)),[1]:()=>v(d.value.value).some(n=>d.compare(v(n),v(i)))})});u!==-1&&(f.value=u),e.value=0},goToOption(u,r,i){if(c.value=!1,t.disabled||O.value&&!p.value.static&&e.value===1)return;let n=s();if(n.activeOptionIndex===null){let C=n.options.findIndex(H=>!H.dataRef.disabled);C!==-1&&(n.activeOptionIndex=C)}let m=Q(u===P.Specific?{focus:P.Specific,id:r}:{focus:u},{resolveItems:()=>n.options,resolveActiveIndex:()=>n.activeOptionIndex,resolveId:C=>C.id,resolveDisabled:C=>C.dataRef.disabled});f.value=m,a.value=i!=null?i:1,l.value=n.options},selectOption(u){let r=l.value.find(n=>n.id===u);if(!r)return;let{dataRef:i}=r;E(w(y.value,{[0]:()=>i.value,[1]:()=>{let n=v(d.value.value).slice(),m=v(i.value),C=n.findIndex(H=>d.compare(m,v(H)));return C===-1?n.push(m):n.splice(C,1),n}}))},selectActiveOption(){if(d.activeOptionIndex.value===null)return;let{dataRef:u,id:r}=l.value[d.activeOptionIndex.value];E(w(y.value,{[0]:()=>u.value,[1]:()=>{let i=v(d.value.value).slice(),n=v(u.value),m=i.findIndex(C=>d.compare(n,v(C)));return m===-1?i.push(n):i.splice(m,1),i}})),d.goToOption(P.Specific,r)},registerOption(u,r){let i={id:u,dataRef:r},n=s(m=>[...m,i]);if(f.value===null){let m=r.value.value;w(y.value,{[0]:()=>d.compare(v(d.value.value),v(m)),[1]:()=>v(d.value.value).some(C=>d.compare(v(C),v(m)))})&&(n.activeOptionIndex=n.options.indexOf(i))}l.value=n.options,f.value=n.activeOptionIndex,a.value=1},unregisterOption(u){let r=s(i=>{let n=i.findIndex(m=>m.id===u);return n!==-1&&i.splice(n,1),i});l.value=r.options,f.value=r.activeOptionIndex,a.value=1}};W([b,R,O],()=>d.closeCombobox(),S(()=>e.value===0)),se(J,d),G(S(()=>w(e.value,{[0]:M.Open,[1]:M.Closed})));let N=S(()=>d.activeOptionIndex.value===null?null:l.value[d.activeOptionIndex.value].dataRef.value);return()=>{let{name:u,disabled:r,...i}=t,n={open:e.value===0,disabled:r,activeIndex:d.activeOptionIndex.value,activeOption:N.value,value:B.value};return K(ue,[...u!=null&&B.value!=null?ne({[u]:B.value}).map(([m,C])=>K(X,Y({features:Z.Hidden,key:m,as:"input",type:"hidden",hidden:!0,readOnly:!0,name:m,value:C}))):[],V({theirProps:{...g,...q(i,["modelValue","defaultValue","nullable","multiple","onUpdate:modelValue","by"])},ourProps:{},slot:n,slots:x,attrs:g,name:"Combobox"})])}}}),Oe=A({name:"ComboboxLabel",props:{as:{type:[Object,String],default:"label"}},setup(t,{attrs:x,slots:g}){let h=F("ComboboxLabel"),e=`headlessui-combobox-label-${j()}`;function o(){var b;(b=T(h.inputRef))==null||b.focus({preventScroll:!0})}return()=>{let b={open:h.comboboxState.value===0,disabled:h.disabled.value},R={id:e,ref:h.labelRef,onClick:o};return V({ourProps:R,theirProps:t,slot:b,attrs:x,slots:g,name:"ComboboxLabel"})}}}),ge=A({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"}},setup(t,{attrs:x,slots:g,expose:h}){let e=F("ComboboxButton"),o=`headlessui-combobox-button-${j()}`;h({el:e.buttonRef,$el:e.buttonRef});function b(p){e.disabled.value||(e.comboboxState.value===0?e.closeCombobox():(p.preventDefault(),e.openCombobox()),$(()=>{var l;return(l=T(e.inputRef))==null?void 0:l.focus({preventScroll:!0})}))}function R(p){switch(p.key){case I.ArrowDown:p.preventDefault(),p.stopPropagation(),e.comboboxState.value===1&&e.openCombobox(),$(()=>{var l;return(l=e.inputRef.value)==null?void 0:l.focus({preventScroll:!0})});return;case I.ArrowUp:p.preventDefault(),p.stopPropagation(),e.comboboxState.value===1&&(e.openCombobox(),$(()=>{e.value.value||e.goToOption(P.Last)})),$(()=>{var l;return(l=e.inputRef.value)==null?void 0:l.focus({preventScroll:!0})});return;case I.Escape:if(e.comboboxState.value!==0)return;p.preventDefault(),e.optionsRef.value&&!e.optionsPropsRef.value.static&&p.stopPropagation(),e.closeCombobox(),$(()=>{var l;return(l=e.inputRef.value)==null?void 0:l.focus({preventScroll:!0})});return}}let O=ee(S(()=>({as:t.as,type:x.type})),e.buttonRef);return()=>{var p,l;let f={open:e.comboboxState.value===0,disabled:e.disabled.value,value:e.value.value},a={ref:e.buttonRef,id:o,type:O.value,tabindex:"-1","aria-haspopup":!0,"aria-controls":(p=T(e.optionsRef))==null?void 0:p.id,"aria-expanded":e.disabled.value?void 0:e.comboboxState.value===0,"aria-labelledby":e.labelRef.value?[(l=T(e.labelRef))==null?void 0:l.id,o].join(" "):void 0,disabled:e.disabled.value===!0?!0:void 0,onKeydown:R,onClick:b};return V({ourProps:a,theirProps:t,slot:f,attrs:x,slots:g,name:"ComboboxButton"})}}}),Re=A({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function}},emits:{change:t=>!0},setup(t,{emit:x,attrs:g,slots:h,expose:e}){let o=F("ComboboxInput"),b=`headlessui-combobox-input-${j()}`;e({el:o.inputRef,$el:o.inputRef});let R=D(o.value.value),O=()=>{var a;let c=o.value.value;return T(o.inputRef)?typeof t.displayValue<"u"?(a=t.displayValue(c))!=null?a:"":typeof c=="string"?c:"":""};z(()=>{_([o.value],()=>R.value=O(),{flush:"sync",immediate:!0}),_([R,o.comboboxState],([a,c],[s,y])=>{let k=T(o.inputRef);!k||(y===0&&c===1||a!==s)&&(k.value=a)},{immediate:!0})});function p(a){switch(a.key){case I.Backspace:case I.Delete:if(o.mode.value!==0||!o.nullable.value)return;let c=a.currentTarget;requestAnimationFrame(()=>{if(c.value===""){o.change(null);let s=T(o.optionsRef);s&&(s.scrollTop=0),o.goToOption(P.Nothing)}});break;case I.Enter:if(o.comboboxState.value!==0||a.isComposing)return;if(a.preventDefault(),a.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case I.ArrowDown:return a.preventDefault(),a.stopPropagation(),w(o.comboboxState.value,{[0]:()=>o.goToOption(P.Next),[1]:()=>o.openCombobox()});case I.ArrowUp:return a.preventDefault(),a.stopPropagation(),w(o.comboboxState.value,{[0]:()=>o.goToOption(P.Previous),[1]:()=>{o.openCombobox(),$(()=>{o.value.value||o.goToOption(P.Last)})}});case I.Home:case I.PageUp:return a.preventDefault(),a.stopPropagation(),o.goToOption(P.First);case I.End:case I.PageDown:return a.preventDefault(),a.stopPropagation(),o.goToOption(P.Last);case I.Escape:if(o.comboboxState.value!==0)return;a.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&a.stopPropagation(),o.closeCombobox();break;case I.Tab:if(o.comboboxState.value!==0)return;o.mode.value===0&&o.selectActiveOption(),o.closeCombobox();break}}function l(a){x("change",a)}function f(a){o.openCombobox(),x("change",a)}return()=>{var a,c,s,y,k,B;let E={open:o.comboboxState.value===0},d={"aria-controls":(a=o.optionsRef.value)==null?void 0:a.id,"aria-expanded":o.disabled.value?void 0:o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null||(c=o.options.value[o.activeOptionIndex.value])==null?void 0:c.id,"aria-multiselectable":o.mode.value===1?!0:void 0,"aria-labelledby":(k=(s=T(o.labelRef))==null?void 0:s.id)!=null?k:(y=T(o.buttonRef))==null?void 0:y.id,id:b,onKeydown:p,onChange:l,onInput:f,role:"combobox",type:(B=g.type)!=null?B:"text",tabIndex:0,ref:o.inputRef},N=q(t,["displayValue"]);return V({ourProps:d,theirProps:N,slot:E,attrs:g,slots:h,features:L.RenderStrategy|L.Static,name:"ComboboxInput"})}}}),Se=A({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:x,slots:g,expose:h}){let e=F("ComboboxOptions"),o=`headlessui-combobox-options-${j()}`;h({el:e.optionsRef,$el:e.optionsRef}),U(()=>{e.optionsPropsRef.value.static=t.static}),U(()=>{e.optionsPropsRef.value.hold=t.hold});let b=oe(),R=S(()=>b!==null?b.value===M.Open:e.comboboxState.value===0);return te({container:S(()=>T(e.optionsRef)),enabled:S(()=>e.comboboxState.value===0),accept(O){return O.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:O.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(O){O.setAttribute("role","none")}}),()=>{var O,p,l,f;let a={open:e.comboboxState.value===0},c={"aria-activedescendant":e.activeOptionIndex.value===null||(O=e.options.value[e.activeOptionIndex.value])==null?void 0:O.id,"aria-labelledby":(f=(p=T(e.labelRef))==null?void 0:p.id)!=null?f:(l=T(e.buttonRef))==null?void 0:l.id,id:o,ref:e.optionsRef,role:"listbox"},s=q(t,["hold"]);return V({ourProps:c,theirProps:s,slot:a,attrs:x,slots:g,features:L.RenderStrategy|L.Static,visible:R.value,name:"ComboboxOptions"})}}}),ye=A({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1}},setup(t,{slots:x,attrs:g,expose:h}){let e=F("ComboboxOption"),o=`headlessui-combobox-option-${j()}`,b=D(null);h({el:b,$el:b});let R=S(()=>e.activeOptionIndex.value!==null?e.options.value[e.activeOptionIndex.value].id===o:!1),O=S(()=>w(e.mode.value,{[0]:()=>e.compare(v(e.value.value),v(t.value)),[1]:()=>v(e.value.value).some(s=>e.compare(v(s),v(t.value)))})),p=S(()=>({disabled:t.disabled,value:t.value,domRef:b}));z(()=>e.registerOption(o,p)),ie(()=>e.unregisterOption(o)),U(()=>{e.comboboxState.value===0&&(!R.value||e.activationTrigger.value!==0&&$(()=>{var s,y;return(y=(s=T(b))==null?void 0:s.scrollIntoView)==null?void 0:y.call(s,{block:"nearest"})}))});function l(s){if(t.disabled)return s.preventDefault();e.selectOption(o),e.mode.value===0&&e.closeCombobox()}function f(){if(t.disabled)return e.goToOption(P.Nothing);e.goToOption(P.Specific,o)}function a(){t.disabled||R.value||e.goToOption(P.Specific,o,0)}function c(){t.disabled||!R.value||e.optionsPropsRef.value.hold||e.goToOption(P.Nothing)}return()=>{let{disabled:s}=t,y={active:R.value,selected:O.value,disabled:s},k={id:o,ref:b,role:"option",tabIndex:s===!0?void 0:-1,"aria-disabled":s===!0?!0:void 0,"aria-selected":O.value,disabled:void 0,onClick:l,onFocus:f,onPointermove:a,onMousemove:a,onPointerleave:c,onMouseleave:c};return V({ourProps:k,theirProps:t,slot:y,attrs:g,slots:x,name:"ComboboxOption"})}}});export{xe as A,Re as B,Oe as F,ye as H,ge as L,Se as j};
