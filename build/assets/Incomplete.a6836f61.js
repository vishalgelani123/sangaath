import{A as V,N as M,_ as q,U as O,o as G,f as X}from"./AppLayout.c471b81a.js";import{_ as H}from"./TextInput.86ba2c92.js";import{_ as J}from"./InputLabel.5855d489.js";import{L as K,B as _,o as a,c as S,w as d,a as e,b as r,g as h,n as v,e as c,f as u,F as T,i as j,t as g}from"./app.c9482037.js";import{_ as Q}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as Y,a as W,b as Z}from"./MagnifyingGlassIcon.72cf383a.js";import{r as R,a as $,b as ee,c as te}from"./XCircleIcon.b480e10e.js";import{r as se}from"./CheckCircleIcon.00a0f7b3.js";const oe={components:{AppLayout:V,TextInput:H,InputLabel:J,Dialog:M,DialogPanel:q,DialogTitle:O,TransitionChild:G,TransitionRoot:X,Link:K,MagnifyingGlassIcon:Y,PlusIcon:W,ExclamationTriangleIcon:Z,EyeIcon:R,CloudArrowUpIcon:$,CheckIcon:ee,CheckCircleIcon:se,XCircleIcon:te},props:["all_forms"],data(){return{display_forms:this.all_forms,search_query:"",application_form:{show_popup:!1,applied_popup_show:!1,popup_title:"",form_id:"",member_row_id:"",scheme_id:"",selecting_pre_requisite_id:null,documents:null,eligible_status:"",incomplete_processing:!1,mark_complete_processing:!1},documents:{},delete_form:{site_name:"",form_id:null,show_popup:!1,processing:!1}}},methods:{search(){var p,o,l,m;var s=this.search_query.toString().toLowerCase();if(s.length>0){this.display_forms=[];for(var t in this.all_forms){var n=this.all_forms[t];if((p=n.beneficiary)!=null&&p.name.toString().toLowerCase().includes(s)){this.display_forms.push(n);continue}if((o=n.scheme)!=null&&o.name.toString().toLowerCase().includes(s)){this.display_forms.push(n);continue}if((m=(l=n.beneficiary)==null?void 0:l.village)!=null&&m.name.toString().toLowerCase().includes(s)){this.display_forms.push(n);continue}}}else this.display_forms=this.all_forms},startApplication(s){this.application_form.popup_title=s.beneficiary.name,this.application_form.scheme_id=s.scheme_id,this.application_form.form_id=s.id,this.application_form.member_row_id=s.beneficiary.id,this.application_form.show_popup=!0,this.application_form.eligible_status="eligible";var t=this;axios.get("/household/scheme/"+s.scheme_id+"/"+s.beneficiary.id).then(function(n){var p=n.data.data;if(p!=null){var o=p.documents;t.application_form.documents={};for(var l in o){var m=o[l];m.is_selected||(m.is_selected=!1,m.preview_url=""),m.file="",t.application_form.documents[m.prerequisite_id]=m}}})},selectDocument(s,t="application_form"){var n=this[t].documents[s].is_selected;n?this.viewDocument(s,t):(this[t].selecting_pre_requisite_id=s,document.getElementById("document_selector").click())},viewDocument(s,t="application_form"){var n=this[t].documents[s].preview_url;window.open(n,"_blank")},removeDocument(s,t="application_form"){var n=this[t].documents[s];n.is_selected=!1,n.preview_url="",n.file=""},previewImage(s,t="application_form"){if(s.target.files[0]!=null){var n=URL.createObjectURL(s.target.files[0]),p=(s.target.files[0].size/1024/1024).toFixed(4);if(p>10)alert("Image too large! Please select an image smaller than 10 MB");else{var o=this[t].selecting_pre_requisite_id;this[t].documents[o].is_selected=!0,this[t].documents[o].preview_url=n,this[t].documents[o].file=s.target.files[0]}document.getElementById("document_selector").value=""}},saveSchemeIncomplete(){var s=new FormData,t=this.application_form.documents,n=[];for(var p in t){var o=this.application_form.documents[p];o.file!=""&&(s.append("document_"+p,o.file),n.push(p))}s.append("selected_documents",JSON.stringify(n)),s.append("scheme_id",this.application_form.scheme_id),s.append("member_row_id",this.application_form.member_row_id),s.append("form_id",this.application_form.form_id),this.application_form.incomplete_processing=!0;var l=this;axios.post("/application/save-incomplete",s).then(function(m){l.$inertia.visit("/documentation/incomplete",{only:["all_forms"]})})},markCompleteScheme(){var s=new FormData,t=this.application_form.documents,n=[];for(var p in t){var o=this.application_form.documents[p];o.file!=""&&(s.append("document_"+p,o.file),n.push(p))}s.append("selected_documents",JSON.stringify(n)),s.append("scheme_id",this.application_form.scheme_id),s.append("member_row_id",this.application_form.member_row_id),s.append("form_id",this.application_form.form_id),s.append("eligible_status",this.application_form.eligible_status),this.application_form.incomplete_processing=!0;var l=this;axios.post("/application/skip-apply",s).then(function(m){l.$inertia.visit("/documentation/incomplete",{only:["all_forms"]})})},deleteForm(s){this.delete_form.form_id=s,this.delete_form.show_popup=!0},deleteProcess(){this.delete_form.processing=!0;var s=new FormData;s.append("form_id",this.delete_form.form_id);var t=this;axios.post("/documentation/incomplete/delete",s).then(function(n){t.delete_form.processing=!1;var p=n.data;p.status==1&&t.$inertia.visit("/documentation/incomplete",{only:["all_forms"]})})}}},ie={class:"flex-1"},ne={class:"flex items-center justify-between"},le={class:"w-full border-b border-gray-200"},ae={class:"-mb-px flex","aria-label":"Tabs"},re={key:0,class:"mt-6 px-4 sm:px-6 lg:px-8"},ce={class:"max-w-sm"},pe={class:"relative rounded-md shadow-sm"},de={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},me={class:"mt-6"},_e={key:0,class:"mt-20 inline-block min-w-full align-middle"},ue=e("div",{class:"flex items-center flex-col"},[e("img",{src:"/images/document-complete.png",class:"w-72",alt:""}),e("h3",{class:"mt-2 text-lg font-semibold text-gray-900"},"No Incomplete documents"),e("p",{class:"mt-1 text-sm text-gray-500"},"You have no incomplete documents to work upon.")],-1),fe=[ue],he={key:1,class:"inline-block min-w-full border-b border-gray-200 align-middle"},ge={class:"min-w-full"},ye=e("thead",null,[e("tr",{class:"border-t border-gray-200"},[e("th",{class:"border-b border-gray-200 bg-gray-50 px-6 py-3 text-left text-sm font-semibold text-gray-900",scope:"col"},[e("span",{class:"lg:pl-2"},"Name")]),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Applied for"),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"}),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"})])],-1),ve={class:"divide-y divide-gray-100 bg-white"},xe={class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},be={class:"lg:pl-2"},we={class:"font-medium text-gray-900"},ke={class:"text-gray-500"},Ce={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},De={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},Ie=["onClick"],Se={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},Te=["onClick"],je={key:0},Le=e("td",{colspan:"5",class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},[e("span",{class:"lg:pl-2 text-gray-600 font-medium"},"No results found!")],-1),Ae=[Le],Ne=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ze={class:"fixed inset-0 z-10 overflow-y-auto"},Be={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Ue={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pt-5 sm:pb-4"},Ee={class:"flex justify-between items-center"},Fe=e("div",{class:"mt-1"},[e("p",{class:"text-sm text-gray-500"},"Upload the documents below to continue")],-1),Pe={key:0,class:"mt-5"},Ve={key:0,class:"grid grid-cols-2 gap-3"},Me=["onClick"],qe={class:"col-span-11"},Oe={class:"text-xs font-medium text-gray-700"},Ge={key:1},Xe={class:"hidden group-hover:flex absolute right-5 bottom-2 gap-3"},He={key:1},Je=e("p",{class:"text-sm text-gray-600 italic"},"No documents needed for this scheme",-1),Ke=[Je],Qe={class:"bg-gray-50 px-4 py-3 flex justify-between sm:px-6"},Ye=e("span",null,"Close",-1),We=[Ye],Ze={key:1},Re={class:"flex flex-row-reverse gap-6"},$e=e("span",null,"Save as In-Complete",-1),et=[$e],tt=e("span",null,"Mark as complete",-1),st=[tt],ot={key:2,class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold bg-blue-600 opacity-60 text-white cursor-not-allowed"},it=e("span",null,"Saving",-1),nt=e("svg",{class:"animate-spin ml-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),lt=[it,nt],at=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),rt={class:"fixed inset-0 z-10 overflow-y-auto"},ct={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},pt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},dt={class:"sm:flex sm:items-start"},mt={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},_t={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},ut=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"},"Are you sure you want to delete this form? This action cannot be undone.")],-1),ft={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},ht=e("span",null,"Delete",-1),gt=[ht],yt={key:1,class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold bg-red-600 opacity-60 text-white cursor-not-allowed"},vt=e("span",null,"Deleting",-1),xt=e("svg",{class:"animate-spin ml-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),bt=[vt,xt],wt=e("span",null,"Cancel",-1),kt=[wt];function Ct(s,t,n,p,o,l){const m=_("Link"),L=_("MagnifyingGlassIcon"),A=_("TextInput"),y=_("TransitionChild"),x=_("DialogTitle"),N=_("CloudArrowUpIcon"),z=_("CheckCircleIcon"),B=_("EyeIcon"),U=_("XCircleIcon"),b=_("DialogPanel"),w=_("Dialog"),k=_("TransitionRoot"),E=_("ExclamationTriangleIcon"),F=_("AppLayout");return a(),S(F,null,{default:d(()=>[e("div",ie,[e("div",ne,[e("div",le,[e("nav",ae,[r(m,{class:v(["border-blue-500 text-blue-600","w-1/3 py-4 px-1 text-center border-b-2 font-semibold text-sm"]),"aria-current":"page"},{default:d(()=>[h("Incomplete")]),_:1}),r(m,{href:"/documentation/pending",class:v(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:d(()=>[h("Pending")]),_:1}),r(m,{href:"/documentation/complete",class:v(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:d(()=>[h("Complete")]),_:1})])])]),n.all_forms.length>0?(a(),c("div",re,[e("div",ce,[e("div",pe,[e("div",de,[r(L,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),r(A,{modelValue:o.search_query,"onUpdate:modelValue":t[0]||(t[0]=i=>o.search_query=i),onKeyup:t[1]||(t[1]=i=>l.search()),onChange:t[2]||(t[2]=i=>l.search()),autocomplete:"off",id:"search",type:"text",placeholder:"Search Incomplete Forms",class:"block w-full pl-10 font-medium",required:""},null,8,["modelValue"])])])])):u("",!0),e("div",me,[n.all_forms.length==0?(a(),c("div",_e,fe)):(a(),c("div",he,[e("table",ge,[ye,e("tbody",ve,[(a(!0),c(T,null,j(o.display_forms,i=>{var f,C,D,I;return a(),c("tr",{key:i.id},[e("td",xe,[e("div",be,[e("div",we,g((f=i.beneficiary)==null?void 0:f.name),1),e("div",ke,g((D=(C=i.beneficiary)==null?void 0:C.village)==null?void 0:D.name),1)])]),e("td",Ce,g((I=i.scheme)==null?void 0:I.name),1),e("td",De,[e("a",{onClick:P=>l.startApplication(i),href:"javascript:void(0)",class:"text-blue-600 hover:text-blue-900"},"Start Application",8,Ie)]),e("td",Se,[e("a",{onClick:P=>l.deleteForm(i.id),href:"javascript:void(0)",class:"text-red-600 hover:text-red-900"},"Delete",8,Te)])])}),128)),o.display_forms.length==0?(a(),c("tr",je,Ae)):u("",!0)])])]))]),r(k,{as:"template",show:o.application_form.show_popup},{default:d(()=>[r(w,{as:"div",class:"relative z-10",onClose:t[7]||(t[7]=i=>o.application_form.show_popup=!1)},{default:d(()=>[r(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[Ne]),_:1}),e("div",ze,[e("div",Be,[r(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:d(()=>[r(b,{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-3xl"},{default:d(()=>[e("div",Ue,[e("div",Ee,[e("div",null,[r(x,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:d(()=>[h(g(o.application_form.popup_title),1)]),_:1}),Fe])]),o.application_form.documents!=null?(a(),c("div",Pe,[Object.keys(o.application_form.documents).length>0?(a(),c("div",Ve,[e("input",{onChange:t[3]||(t[3]=i=>l.previewImage(i)),type:"file",accept:"image/*",id:"document_selector",class:"hidden"},null,32),(a(!0),c(T,null,j(o.application_form.documents,i=>(a(),c("div",{key:i.prerequisite_id,onClick:f=>l.selectDocument(i.prerequisite_id),class:v([{"cursor-pointer":!i.is_selected},"w-full group hover:bg-gray-100 relative border border-gray-200 rounded grid grid-cols-12 items-center px-3 py-2"])},[e("div",qe,[e("p",Oe,g(i.pre_requisite.name),1)]),i.is_selected?(a(),c("div",Ge,[r(z,{class:"group-hover:hidden text-right text-green-600 h-5 w-5"}),e("div",Xe,[r(B,{onClick:f=>l.viewDocument(i.prerequisite_id),class:"cursor-pointer text-blue-600 h-5 w-5"},null,8,["onClick"]),r(U,{onClick:f=>l.removeDocument(i.prerequisite_id),class:"cursor-pointer text-red-600 h-5 w-5"},null,8,["onClick"])])])):(a(),S(N,{key:0,class:"text-right text-blue-600 h-5 w-5"}))],10,Me))),128))])):(a(),c("div",He,Ke))])):u("",!0)]),e("div",Qe,[!o.application_form.mark_complete_processing&&!o.application_form.incomplete_processing?(a(),c("button",{key:0,onClick:t[4]||(t[4]=i=>o.application_form.show_popup=!1),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},We)):(a(),c("div",Ze)),e("div",Re,[!o.application_form.mark_complete_processing&&!o.application_form.incomplete_processing?(a(),c("button",{key:0,onClick:t[5]||(t[5]=(...i)=>l.saveSchemeIncomplete&&l.saveSchemeIncomplete(...i)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600"},et)):u("",!0),!o.application_form.mark_complete_processing&&!o.application_form.incomplete_processing?(a(),c("button",{key:1,onClick:t[6]||(t[6]=(...i)=>l.markCompleteScheme&&l.markCompleteScheme(...i)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},st)):u("",!0),o.application_form.mark_complete_processing||o.application_form.incomplete_processing?(a(),c("button",ot,lt)):u("",!0)])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),r(k,{as:"template",show:o.delete_form.show_popup},{default:d(()=>[r(w,{as:"div",class:"relative z-10",onClose:t[10]||(t[10]=i=>o.delete_form.show_popup=!1)},{default:d(()=>[r(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:d(()=>[at]),_:1}),e("div",rt,[e("div",ct,[r(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:d(()=>[r(b,{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:d(()=>[e("div",pt,[e("div",dt,[e("div",mt,[r(E,{class:"h-6 w-6 text-red-600","aria-hidden":"true"})]),e("div",_t,[r(x,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:d(()=>[h("Delete?")]),_:1}),ut])])]),e("div",ft,[o.delete_form.processing?o.delete_form.processing?(a(),c("button",yt,bt)):u("",!0):(a(),c("button",{key:0,onClick:t[8]||(t[8]=(...i)=>l.deleteProcess&&l.deleteProcess(...i)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-red-600 text-white hover:text-slate-100 hover:bg-red-500 active:bg-red-800 active:text-red-100 focus-visible:outline-red-600"},gt)),o.delete_form.processing?u("",!0):(a(),c("button",{key:2,onClick:t[9]||(t[9]=i=>o.delete_form.show_popup=!1),type:"button",class:"mr-3 group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},kt))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})}const zt=Q(oe,[["render",Ct]]);export{zt as default};
