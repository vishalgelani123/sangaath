import{A as j,N,_ as V,U as E,o as M,f as S}from"./AppLayout.c471b81a.js";import{L as F,a0 as z,B as i,o as d,c as H,w as c,a as e,b as n,g as h,n as g,e as m,f as p,F as R,i as G,t as u}from"./app.c9482037.js";import{_ as U}from"./TextInput.86ba2c92.js";import{_ as K}from"./InputLabel.5855d489.js";import{_ as Y}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as $,a as J,b as Q}from"./MagnifyingGlassIcon.72cf383a.js";import{r as X,a as O,b as W,c as Z}from"./XCircleIcon.b480e10e.js";import{r as ee}from"./CloudArrowDownIcon.82ddc2f3.js";import{r as te}from"./CheckCircleIcon.00a0f7b3.js";const se={components:{AppLayout:j,TextInput:U,InputLabel:K,Dialog:N,DialogPanel:V,DialogTitle:E,TransitionChild:M,TransitionRoot:S,Link:F,MagnifyingGlassIcon:$,PlusIcon:J,ExclamationTriangleIcon:Q,EyeIcon:X,CloudArrowDownIcon:ee,CloudArrowUpIcon:O,CheckIcon:W,CheckCircleIcon:te,XCircleIcon:Z},props:["initial_forms"],data(){return{searched_forms:[],loaded_forms:this.initial_forms,display_forms:this.initial_forms,last_search_query:"",search_query:"",is_search_complete:!1,is_loading:!1,has_reached_search_bottom:!1,has_reached_bottom:!1,search_loaded_rows:0,loaded_rows:50,application_form:{show_popup:!1,applied_popup_show:!1,popup_title:"",form_id:"",member_row_id:"",scheme_id:"",selecting_pre_requisite_id:null,documents:null,eligible_status:"",incomplete_processing:!1,mark_complete_processing:!1},documents:{},delete_form:{site_name:"",form_id:null,show_popup:!1,processing:!1}}},mounted(){window.addEventListener("scroll",function(){const o=window.innerHeight+window.scrollY,r=document.body.scrollHeight-o,l=200;!(this.search_query.length>0?this.has_reached_search_bottom:this.has_reached_bottom)&&!this.is_loading&&r<l&&(this.is_loading=!0,this.loadMoreData())}.bind(this))},methods:{debouncedSearch:z.exports.debounce(function(){this.search()},500),search(){var o=this.search_query.toString().toLowerCase().trim();o.length>0&&o!=this.last_search_query&&(this.has_reached_search_bottom=!1,this.loadMoreData(!0))},loadMoreData(o=!1){o&&(this.search_loaded_rows=0,this.searched_forms=[],this.has_reached_search_bottom=!1);let t=null,r=this.loaded_rows;this.search_query.length>0&&(t=`&search=${this.search_query}`,this.last_search_query=this.search_query.toString().toLowerCase(),r=this.search_loaded_rows),axios.get(`/documentation/pending?is_ajax=1&skip=${r}${t!=null?t:""}`).then(function(l){const s=l.data;s.rows&&(t?(this.searched_forms.push(...s.rows),this.search_loaded_rows=this.searched_forms.length):(this.loaded_forms.push(...s.rows),this.loaded_rows=this.loaded_forms.length),this.is_loading=!1,this.is_search_complete=!0,s.rows.length==0&&(t?this.has_reached_search_bottom=!0:this.has_reached_bottom=!0))}.bind(this))},downloadDocuments(o){var t=this;axios.get("/documentation/pending/documents/"+o).then(function(r){var l=r.data;l.status==1&&t.$inertia.visit("/documentation/pending",{only:["all_forms"]});var l=r.data.data,s=l.download_link;document.getElementById("download_document_link").setAttribute("href",s),document.getElementById("download_document_link").click()})},deleteForm(o){this.delete_form.form_id=o,this.delete_form.show_popup=!0},deleteProcess(){this.delete_form.processing=!0;var o=new FormData;o.append("form_id",this.delete_form.form_id);var t=this;axios.post("/documentation/pending/delete",o).then(function(r){t.delete_form.processing=!1;var l=r.data;l.status==1&&t.$inertia.visit("/documentation/pending",{only:["all_forms"]})})}}},oe={class:"flex-1"},ae={class:"flex items-center justify-between"},ne={class:"w-full border-b border-gray-200"},re={class:"-mb-px flex","aria-label":"Tabs"},ie={key:0,class:"mt-6 px-4 sm:px-6 lg:px-8"},le={class:"max-w-sm"},de={class:"relative rounded-md shadow-sm"},ce={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},me={class:"mt-6"},_e={key:0,class:"mt-20 inline-block min-w-full align-middle"},he=e("div",{class:"flex items-center flex-col"},[e("img",{src:"/images/document-complete.png",class:"w-72",alt:""}),e("h3",{class:"mt-2 text-lg font-semibold text-gray-900"},"No Pending documents"),e("p",{class:"mt-1 text-sm text-gray-500"},"Good Job! You have no pending you documents.")],-1),pe=[he],ue={key:1,class:"inline-block min-w-full border-b border-gray-200 align-middle"},fe=e("a",{href:"",id:"download_document_link",class:"hidden",download:""},null,-1),ge={class:"min-w-full"},xe=e("thead",null,[e("tr",{class:"border-t border-gray-200"},[e("th",{class:"border-b border-gray-200 bg-gray-50 px-6 py-3 text-left text-sm font-semibold text-gray-900",scope:"col"},[e("span",{class:"lg:pl-2"},"Name")]),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Applied for"),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Village"),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"}),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"}),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"})])],-1),ye={class:"divide-y divide-gray-100 bg-white"},be={class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},we={class:"flex items-center space-x-3 lg:pl-2"},ve={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},ke={class:"font-medium"},Ce={class:"text-gray-500"},De={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},Ie={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},Te=["href"],qe={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},Le=["onClick"],Ae={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},Pe=["onClick"],Be={key:0},je=e("td",{colspan:"5",class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},[e("span",{class:"lg:pl-2 text-gray-600 font-medium"},"No results found!")],-1),Ne=[je],Ve=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Ee={class:"fixed inset-0 z-10 overflow-y-auto"},Me={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Se={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Fe={class:"sm:flex sm:items-start"},ze={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},He={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Re=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"},"Are you sure you want to delete this form? This action cannot be undone.")],-1),Ge={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ue=e("span",null,"Delete",-1),Ke=[Ue],Ye={key:1,class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold bg-red-600 opacity-60 text-white cursor-not-allowed"},$e=e("span",null,"Deleting",-1),Je=e("svg",{class:"animate-spin ml-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Qe=[$e,Je],Xe=e("span",null,"Cancel",-1),Oe=[Xe];function We(o,t,r,l,s,_){const f=i("Link"),C=i("MagnifyingGlassIcon"),D=i("TextInput"),x=i("CloudArrowDownIcon"),y=i("TransitionChild"),I=i("ExclamationTriangleIcon"),T=i("DialogTitle"),q=i("DialogPanel"),L=i("Dialog"),A=i("TransitionRoot"),P=i("AppLayout");return d(),H(P,null,{default:c(()=>[e("div",oe,[e("div",ae,[e("div",ne,[e("nav",re,[n(f,{href:"/documentation/incomplete",class:g(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:c(()=>[h("Incomplete")]),_:1}),n(f,{class:g(["border-blue-500 text-blue-600","w-1/3 py-4 px-1 text-center border-b-2 font-semibold text-sm"]),"aria-current":"page"},{default:c(()=>[h("Pending")]),_:1}),n(f,{href:"/documentation/complete",class:g(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:c(()=>[h("Complete")]),_:1})])])]),r.initial_forms.length>0?(d(),m("div",ie,[e("div",le,[e("div",de,[e("div",ce,[n(C,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),n(D,{modelValue:s.search_query,"onUpdate:modelValue":t[0]||(t[0]=a=>s.search_query=a),onKeyup:_.debouncedSearch,onChange:_.debouncedSearch,autocomplete:"off",id:"search",type:"text",placeholder:"Search Pending Forms",class:"block w-full pl-10 font-medium",required:""},null,8,["modelValue","onKeyup","onChange"])])])])):p("",!0),e("div",me,[r.initial_forms.length==0?(d(),m("div",_e,pe)):(d(),m("div",ue,[fe,e("table",ge,[xe,e("tbody",ye,[(d(!0),m(R,null,G(s.search_query.length>0&&s.is_search_complete?s.searched_forms:s.loaded_forms,a=>{var b,w,v,k;return d(),m("tr",{key:a.id},[e("td",be,[e("div",we,u((b=a.beneficiary)==null?void 0:b.name),1)]),e("td",ve,[e("div",ke,u((w=a.scheme)==null?void 0:w.name),1),e("div",Ce,u(a.applied_date),1)]),e("td",De,u((k=(v=a.beneficiary)==null?void 0:v.village)==null?void 0:k.name),1),e("td",Ie,[e("a",{href:"/documentation/pending/details/"+a.id,class:"flex items-center text-blue-600 hover:text-blue-900"},[n(x,{class:"h-4 w-4 mr-2"}),h(" Details ")],8,Te)]),e("td",qe,[e("a",{onClick:B=>_.downloadDocuments(a.id),href:"javascript:void(0)",class:"flex items-center text-blue-600 hover:text-blue-900"},[n(x,{class:"h-4 w-4 mr-2"}),h(" Documents ")],8,Le)]),e("td",Ae,[e("a",{onClick:B=>_.deleteForm(a.id),href:"javascript:void(0)",class:"text-red-600 hover:text-red-900"},"Delete",8,Pe)])])}),128)),s.display_forms.length==0?(d(),m("tr",Be,Ne)):p("",!0)])])]))]),n(A,{as:"template",show:s.delete_form.show_popup},{default:c(()=>[n(L,{as:"div",class:"relative z-10",onClose:t[3]||(t[3]=a=>s.delete_form.show_popup=!1)},{default:c(()=>[n(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[Ve]),_:1}),e("div",Ee,[e("div",Me,[n(y,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:c(()=>[n(q,{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:c(()=>[e("div",Se,[e("div",Fe,[e("div",ze,[n(I,{class:"h-6 w-6 text-red-600","aria-hidden":"true"})]),e("div",He,[n(T,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:c(()=>[h("Delete?")]),_:1}),Re])])]),e("div",Ge,[s.delete_form.processing?s.delete_form.processing?(d(),m("button",Ye,Qe)):p("",!0):(d(),m("button",{key:0,onClick:t[1]||(t[1]=(...a)=>_.deleteProcess&&_.deleteProcess(...a)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-red-600 text-white hover:text-slate-100 hover:bg-red-500 active:bg-red-800 active:text-red-100 focus-visible:outline-red-600"},Ke)),s.delete_form.processing?p("",!0):(d(),m("button",{key:2,onClick:t[2]||(t[2]=a=>s.delete_form.show_popup=!1),type:"button",class:"mr-3 group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},Oe))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})}const lt=Y(se,[["render",We]]);export{lt as default};
