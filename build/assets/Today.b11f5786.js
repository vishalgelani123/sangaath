import{A as T,N as L,_ as D,U as I,o as U,f as z}from"./AppLayout.c471b81a.js";import{_ as B}from"./TextInput.86ba2c92.js";import{_ as A}from"./InputLabel.5855d489.js";import{L as F,B as d,o as r,c as N,w as c,a as e,b as i,g as y,n as m,e as n,f as p,F as P,i as q,t as h}from"./app.c9482037.js";import{_ as M}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as R,a as E,b as G}from"./MagnifyingGlassIcon.72cf383a.js";import{r as H,a as K,b as Q,c as X}from"./XCircleIcon.b480e10e.js";import{r as Y}from"./CheckCircleIcon.00a0f7b3.js";import{l as J}from"./switch.67ed66d7.js";const O={components:{AppLayout:T,TextInput:B,InputLabel:A,Dialog:L,DialogPanel:D,DialogTitle:I,TransitionChild:U,TransitionRoot:z,Switch:J,Link:F,MagnifyingGlassIcon:R,PlusIcon:E,ExclamationTriangleIcon:G,EyeIcon:H,CloudArrowUpIcon:K,CheckIcon:Q,CheckCircleIcon:Y,XCircleIcon:X},props:["all_forms"],data(){return{display_forms:this.all_forms,search_query:"",application_form:{show_popup:!1,popup_title:"",form_id:"",has_benefitted:!1,reject_reason:{value:"",error:!1},discrepancy:{value:"",error:!1},date:{value:"",error:!1},processing:!1},documents:{},delete_form:{site_name:"",form_id:null,show_popup:!1,processing:!1}}},methods:{search(){var a=this.search_query.toString().toLowerCase();if(a.length>0){this.display_forms=[];for(var s in this.all_forms){var l=this.all_forms[s];if(l.beneficiary.name.toString().toLowerCase().includes(a)){this.display_forms.push(l);continue}if(l.scheme.name.toString().toLowerCase().includes(a)){this.display_forms.push(l);continue}if(l.beneficiary.village.name.toString().toLowerCase().includes(a)){this.display_forms.push(l);continue}}}else this.display_forms=this.all_forms},startApplication(a){this.application_form.popup_title=a.beneficiary.name,this.application_form.form_id=a.id,this.application_form.show_popup=!0},validateForm(){var a=this.application_form;a.date.error=!1,a.reject_reason.error=!1,a.discrepancy.error=!1;var s=this.application_form.has_benefitted,l=a.date.value.toString();if(l.length==0){a.date.error=!0;return}var f="",t="";if(!s){var f=a.reject_reason.value.toString();if(f.length==0){a.reject_reason.error=!0;return}var t=a.discrepancy.value.toString();if(t.length==0){a.discrepancy.error=!0;return}}this.updateStatus(s,l,f,t)},updateStatus(a,s,l,f){this.application_form.processing=!0;var t=new FormData;t.append("form_id",this.application_form.form_id),t.append("has_benefitted",a?1:-1),t.append("date",s),t.append("reject_reason",l),t.append("discrepancy",f);var u=this;axios.post("/followup/update-status",t).then(function(_){u.application_form.processing=!1;var x=_.data;x.status==1&&u.$inertia.visit("/followup/today",{only:["all_forms"]})})}}},W={class:"flex-1"},Z={class:"flex items-center justify-between"},$={class:"w-full border-b border-gray-200"},ee={class:"-mb-px flex","aria-label":"Tabs"},te={key:0,class:"mt-6 px-4 sm:px-6 lg:px-8"},se={class:"max-w-sm"},oe={class:"relative rounded-md shadow-sm"},ae={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},ie={class:"mt-6"},re={key:0,class:"mt-20 inline-block min-w-full align-middle"},le=e("div",{class:"flex items-center flex-col"},[e("img",{src:"/images/document-complete.png",class:"w-72",alt:""}),e("h3",{class:"mt-2 text-lg font-semibold text-gray-900"},"No Follow Ups"),e("p",{class:"mt-1 text-sm text-gray-500"},"You have no follow up for today.")],-1),ne=[le],ce={key:1,class:"inline-block min-w-full border-b border-gray-200 align-middle"},de={class:"min-w-full"},pe=e("thead",null,[e("tr",{class:"border-t border-gray-200"},[e("th",{class:"border-b border-gray-200 bg-gray-50 px-6 py-3 text-left text-sm font-semibold text-gray-900",scope:"col"},[e("span",{class:"lg:pl-2"},"Name")]),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Scheme"),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Application date"),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Days"),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"})])],-1),ue={class:"divide-y divide-gray-100 bg-white"},me={class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},fe={class:"lg:pl-2"},_e={class:"font-medium text-gray-900"},he={class:"text-gray-500"},ye={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},ge={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},be={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},xe={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},ve=["onClick"],we={key:0},ke=e("td",{colspan:"5",class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},[e("span",{class:"lg:pl-2 text-gray-600 font-medium"},"No results found!")],-1),Ce=[ke],je=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Se={class:"fixed inset-0 z-10 overflow-y-auto"},Ve={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Te={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pt-5 sm:pb-4"},Le={class:"mb-5 flex justify-between items-center"},De=e("div",{class:"mt-1"},[e("p",{class:"text-sm text-gray-500"},"Select the details to update status")],-1),Ie={class:"my-5 flex flex-col gap-y-5"},Ue={class:"flex justify-between"},ze=e("span",{class:"sr-only"},"Use setting",-1),Be=e("svg",{class:"h-3 w-3 text-gray-400",fill:"none",viewBox:"0 0 12 12"},[e("path",{d:"M4 8l2-2m0 0l2-2M6 6L4 4m2 2l2 2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Ae=[Be],Fe=e("svg",{class:"h-3 w-3 text-blue-600",fill:"currentColor",viewBox:"0 0 12 12"},[e("path",{d:"M3.707 5.293a1 1 0 00-1.414 1.414l1.414-1.414zM5 8l-.707.707a1 1 0 001.414 0L5 8zm4.707-3.293a1 1 0 00-1.414-1.414l1.414 1.414zm-7.414 2l2 2 1.414-1.414-2-2-1.414 1.414zm3.414 2l4-4-1.414-1.414-4 4 1.414 1.414z"})],-1),Ne=[Fe],Pe={class:""},qe={class:"relative rounded-md shadow-sm"},Me={key:0,class:"mt-1 text-red-600 text-sm"},Re={key:0,class:""},Ee={class:"relative rounded-md shadow-sm"},Ge={key:0,class:"mt-1 text-red-600 text-sm"},He={key:1,class:""},Ke={class:"relative rounded-md shadow-sm"},Qe={key:0,class:"mt-1 text-red-600 text-sm"},Xe={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Ye=e("span",null,"Update",-1),Je=[Ye],Oe={key:1,class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold bg-blue-600 opacity-60 text-white cursor-not-allowed"},We=e("span",null,"Updating",-1),Ze=e("svg",{class:"animate-spin ml-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$e=[We,Ze],et=e("span",null,"Cancel",-1),tt=[et];function st(a,s,l,f,t,u){const _=d("Link"),x=d("MagnifyingGlassIcon"),g=d("TextInput"),v=d("TransitionChild"),w=d("DialogTitle"),b=d("InputLabel"),k=d("Switch"),C=d("DialogPanel"),j=d("Dialog"),S=d("TransitionRoot"),V=d("AppLayout");return r(),N(V,null,{default:c(()=>[e("div",W,[e("div",Z,[e("div",$,[e("nav",ee,[i(_,{class:m(["border-blue-500 text-blue-600","w-1/3 py-4 px-1 text-center border-b-2 font-semibold text-sm"]),"aria-current":"page"},{default:c(()=>[y("Today")]),_:1}),i(_,{href:"/followup/previous",class:m(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:c(()=>[y("Previous Pending")]),_:1}),i(_,{href:"/followup/benefit-received",class:m(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:c(()=>[y("Benefit Received")]),_:1}),i(_,{href:"/followup/rejected",class:m(["border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","w-1/3 py-4 px-1 text-center border-b-2 font-medium text-sm"]),"aria-current":"page"},{default:c(()=>[y("Rejected")]),_:1})])])]),l.all_forms.length>0?(r(),n("div",te,[e("div",se,[e("div",oe,[e("div",ae,[i(x,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),i(g,{modelValue:t.search_query,"onUpdate:modelValue":s[0]||(s[0]=o=>t.search_query=o),onKeyup:s[1]||(s[1]=o=>u.search()),onChange:s[2]||(s[2]=o=>u.search()),autocomplete:"off",id:"search",type:"text",placeholder:"Search Today Followups",class:"block w-full pl-10 font-medium",required:""},null,8,["modelValue"])])])])):p("",!0),e("div",ie,[l.all_forms.length==0?(r(),n("div",re,ne)):(r(),n("div",ce,[e("table",de,[pe,e("tbody",ue,[(r(!0),n(P,null,q(t.display_forms,o=>(r(),n("tr",{key:o.id},[e("td",me,[e("div",fe,[e("div",_e,h(o.beneficiary.name),1),e("div",he,h(o.beneficiary.village.name),1)])]),e("td",ye,h(o.scheme.name),1),e("td",ge,h(o.govt_submission_date),1),e("td",be,h(o.followup_days),1),e("td",xe,[e("a",{onClick:ot=>u.startApplication(o),href:"javascript:void(0)",class:"text-blue-600 hover:text-blue-900"},"Update",8,ve)])]))),128)),t.display_forms.length==0?(r(),n("tr",we,Ce)):p("",!0)])])]))]),i(S,{as:"template",show:t.application_form.show_popup},{default:c(()=>[i(j,{as:"div",class:"relative z-10",onClose:s[9]||(s[9]=o=>t.application_form.show_popup=!1)},{default:c(()=>[i(v,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[je]),_:1}),e("div",Se,[e("div",Ve,[i(v,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:c(()=>[i(C,{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-xs"},{default:c(()=>[e("div",Te,[e("div",Le,[e("div",null,[i(w,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:c(()=>[y(h(t.application_form.popup_title),1)]),_:1}),De])]),e("div",Ie,[e("div",Ue,[i(b,{for:"update_status_date",value:"Has benefited?"}),i(k,{modelValue:t.application_form.has_benefitted,"onUpdate:modelValue":s[3]||(s[3]=o=>t.application_form.has_benefitted=o),class:m([t.application_form.has_benefitted?"bg-blue-600":"bg-gray-200","relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"])},{default:c(()=>[ze,e("span",{class:m([t.application_form.has_benefitted?"translate-x-5":"translate-x-0","pointer-events-none relative inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"])},[e("span",{class:m([t.application_form.has_benefitted?"opacity-0 ease-out duration-100":"opacity-100 ease-in duration-200","absolute inset-0 flex h-full w-full items-center justify-center transition-opacity"]),"aria-hidden":"true"},Ae,2),e("span",{class:m([t.application_form.has_benefitted?"opacity-100 ease-in duration-200":"opacity-0 ease-out duration-100","absolute inset-0 flex h-full w-full items-center justify-center transition-opacity"]),"aria-hidden":"true"},Ne,2)],2)]),_:1},8,["modelValue","class"])]),e("div",Pe,[i(b,{for:"application_date",value:t.application_form.has_benefitted?"Date":"Follow Up Date"},null,8,["value"]),e("div",qe,[i(g,{modelValue:t.application_form.date.value,"onUpdate:modelValue":s[4]||(s[4]=o=>t.application_form.date.value=o),id:"application_date",type:"date",class:"block w-full font-medium",required:""},null,8,["modelValue"])]),t.application_form.date.error?(r(),n("p",Me,"Please select valid date")):p("",!0)]),t.application_form.has_benefitted?p("",!0):(r(),n("div",Re,[i(b,{for:"name",value:"Reject reason"}),e("div",Ee,[i(g,{modelValue:t.application_form.reject_reason.value,"onUpdate:modelValue":s[5]||(s[5]=o=>t.application_form.reject_reason.value=o),id:"site_name",type:"text",class:"block w-full font-medium",required:""},null,8,["modelValue"])]),t.application_form.reject_reason.error?(r(),n("p",Ge,"Please enter reject reason")):p("",!0)])),t.application_form.has_benefitted?p("",!0):(r(),n("div",He,[i(b,{for:"discrepancy",value:"Discrepancy"}),e("div",Ke,[i(g,{modelValue:t.application_form.discrepancy.value,"onUpdate:modelValue":s[6]||(s[6]=o=>t.application_form.discrepancy.value=o),id:"discrepancy",type:"text",class:"block w-full font-medium",required:""},null,8,["modelValue"])]),t.application_form.discrepancy.error?(r(),n("p",Qe,"Please enter discrepancy")):p("",!0)]))])]),e("div",Xe,[t.application_form.processing?t.application_form.processing?(r(),n("button",Oe,$e)):p("",!0):(r(),n("button",{key:0,onClick:s[7]||(s[7]=(...o)=>u.validateForm&&u.validateForm(...o)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600"},Je)),t.application_form.processing?p("",!0):(r(),n("button",{key:2,onClick:s[8]||(s[8]=o=>t.application_form.show_popup=!1),type:"button",class:"mr-3 group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},tt))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})}const mt=M(O,[["render",st]]);export{mt as default};
