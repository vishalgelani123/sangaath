import{A as T,N as I,_ as N,U as V,o as P,f as L}from"./AppLayout.c471b81a.js";import{_ as z}from"./TextInput.86ba2c92.js";import{_ as A}from"./InputLabel.5855d489.js";import{B as m,o as a,c as M,w as c,a as e,b as i,e as d,f as u,F as B,i as E,g as h,t as _,D as F,N as q}from"./app.c9482037.js";import{_ as G}from"./_plugin-vue_export-helper.cdc0426e.js";import{r as U,a as R,b as H}from"./MagnifyingGlassIcon.72cf383a.js";const J={components:{AppLayout:T,TextInput:z,InputLabel:A,Dialog:I,DialogPanel:N,DialogTitle:V,TransitionChild:P,TransitionRoot:L,MagnifyingGlassIcon:U,PlusIcon:R,ExclamationTriangleIcon:H},props:["all_sites"],data(){return{display_sites:this.all_sites,search_query:"",site_form:{show_popup:!1,popup_title:"Create New Site",name:{value:"",error:!1},state:{value:"",error:!1},save_type:"new",site_id:null,processing:!1},delete_form:{site_name:"",site_id:null,show_popup:!1,processing:!1}}},methods:{search(){var l=this.search_query.toString().toLowerCase();if(l.length>0){this.display_sites=[];for(var t in this.all_sites){var n=this.all_sites[t];(n.name.toString().toLowerCase().includes(l)||n.display_state.toString().toLowerCase().includes(l))&&this.display_sites.push(n)}}else this.display_sites=this.all_sites},addSite(){this.site_form.name.error=!1,this.site_form.state.error=!1,this.site_form.save_type="new",this.site_form.site_id=null,this.site_form.popup_title="Create New Site",this.site_form.show_popup=!0},editSite(l){this.site_form.name.error=!1,this.site_form.state.error=!1,this.site_form.save_type="edit",this.site_form.site_id=l.id,this.site_form.name.value=l.name,this.site_form.state.value=l.state,this.site_form.popup_title="Edit Site",this.site_form.show_popup=!0},deleteSite(l,t){this.delete_form.site_name=l,this.delete_form.site_id=t,this.delete_form.show_popup=!0},validateForm(){this.site_form.name.error=!1,this.site_form.state.error=!1;var l=this.site_form.name.value.toString();if(l.length==0){this.site_form.name.error=!0;return}var t=this.site_form.state.value.toString();if(t.length==0){this.site_form.state.error=!0;return}this.saveSite(l,t)},saveSite(l,t){this.site_form.processing=!0;var n=new FormData;n.append("name",l),n.append("state",t),n.append("save_type",this.site_form.save_type),n.append("site_id",this.site_form.site_id);var p=this;axios.post("/sites/save",n).then(function(o){p.site_form.processing=!1;var r=o.data;r.status==1&&p.$inertia.visit("/sites",{only:["all_sites"]})})},deleteProcess(){this.delete_form.processing=!0;var l=new FormData;l.append("site_id",this.delete_form.site_id);var t=this;axios.post("/sites/delete",l).then(function(n){t.delete_form.processing=!1;var p=n.data;p.status==1&&t.$inertia.visit("/sites",{only:["all_sites"]})})}}},K={class:"flex-1"},O={class:"border-b border-gray-200 px-4 py-3 flex items-center justify-between sm:px-6 lg:px-8"},Q=e("div",{class:"min-w-0 flex-1"},[e("h1",{class:"text-lg font-medium leading-6 text-gray-900 sm:truncate"},"All Sites")],-1),W={class:"flex mt-0 ml-4"},X=e("span",null,"New Site",-1),Y={key:0,class:"mt-6 px-4 sm:px-6 lg:px-8"},Z={class:"max-w-sm"},$={class:"relative rounded-md shadow-sm"},ee={class:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"},te={class:"mt-6"},se={key:0,class:"mt-20 inline-block min-w-full align-middle"},oe={class:"flex items-center flex-col"},ie=e("img",{src:"/images/map.png",class:"w-72",alt:""},null,-1),le=e("h3",{class:"mt-2 text-lg font-semibold text-gray-900"},"No sites available",-1),ae=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new site.",-1),ne={class:"mt-6"},re=e("span",null,"New Site",-1),de={key:1,class:"inline-block min-w-full border-b border-gray-200 align-middle"},ce={class:"min-w-full"},me=e("thead",null,[e("tr",{class:"border-t border-gray-200"},[e("th",{class:"border-b border-gray-200 bg-gray-50 px-6 py-3 text-left text-sm font-semibold text-gray-900",scope:"col"},[e("span",{class:"lg:pl-2"},"Name")]),e("th",{class:"border-b border-gray-200 bg-gray-50 px-6 py-3 text-left text-sm font-semibold text-gray-900",scope:"col"},"Total Villages"),e("th",{class:"hidden border-b border-gray-200 bg-gray-50 px-6 py-3 text-right text-sm font-semibold text-gray-900 md:table-cell",scope:"col"},"Created On"),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"}),e("th",{class:"border-b border-gray-200 bg-gray-50 py-3 pr-6 text-right text-sm font-semibold text-gray-900",scope:"col"})])],-1),ue={class:"divide-y divide-gray-100 bg-white"},_e={class:"w-1/2 max-w-0 whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},pe={class:"flex items-center space-x-3 lg:pl-2"},fe={class:"font-normal text-gray-500"},he={class:"px-6 py-3 text-sm font-medium text-gray-500"},ye={class:"flex items-center space-x-2"},ge={class:"hidden whitespace-nowrap px-6 py-3 text-right text-sm text-gray-500 md:table-cell"},xe={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},ve=["onClick"],be={class:"whitespace-nowrap px-6 py-3 text-right text-sm font-medium"},we=["onClick"],ke={key:0},Se=e("td",{colspan:"5",class:"whitespace-nowrap px-6 py-3 text-sm font-medium text-gray-900"},[e("span",{class:"lg:pl-2 text-gray-600 font-medium"},"No results found!")],-1),Ce=[Se],De=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),je={class:"fixed inset-0 z-10 overflow-y-auto"},Te={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},Ie={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pt-5 sm:pb-4"},Ne={class:"text-left"},Ve=e("div",{class:"mt-1"},[e("p",{class:"text-sm text-gray-500"},"Enter the basic details to continue")],-1),Pe={class:"my-5 flex flex-col gap-y-6"},Le={class:""},ze={class:"relative rounded-md shadow-sm"},Ae={key:0,class:"mt-1 text-red-600 text-sm"},Me={class:""},Be=e("option",{value:"",selected:"",disabled:""},"Select Site State",-1),Ee=e("option",{value:"gujarat"},"Gujarat",-1),Fe=e("option",{value:"maharashtra"},"Maharashtra",-1),qe=e("option",{value:"haryana"},"Haryana",-1),Ge=e("option",{value:"madhya_pradesh"},"Madhya Pradesh",-1),Ue=e("option",{value:"rajasthan"},"Rajasthan",-1),Re=e("option",{value:"jharkhand"},"Jharkhand",-1),He=e("option",{value:"telangana"},"Telangana",-1),Je=[Be,Ee,Fe,qe,Ge,Ue,Re,He],Ke={key:0,class:"mt-1 text-red-600 text-sm"},Oe={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},Qe=e("span",null,"Save",-1),We=[Qe],Xe={key:1,class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold bg-blue-600 opacity-60 text-white cursor-not-allowed"},Ye=e("span",null,"Saving",-1),Ze=e("svg",{class:"animate-spin ml-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),$e=[Ye,Ze],et=e("span",null,"Cancel",-1),tt=[et],st=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ot={class:"fixed inset-0 z-10 overflow-y-auto"},it={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},lt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},at={class:"sm:flex sm:items-start"},nt={class:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},rt={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},dt=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"},"Are you sure you want to delete this site? This action cannot be undone.")],-1),ct={class:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},mt=e("span",null,"Delete",-1),ut=[mt],_t={key:1,class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold bg-red-600 opacity-60 text-white cursor-not-allowed"},pt=e("span",null,"Deleting",-1),ft=e("svg",{class:"animate-spin ml-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),ht=[pt,ft],yt=e("span",null,"Cancel",-1),gt=[yt];function xt(l,t,n,p,o,r){const y=m("PlusIcon"),S=m("MagnifyingGlassIcon"),g=m("TextInput"),f=m("TransitionChild"),x=m("DialogTitle"),v=m("InputLabel"),b=m("DialogPanel"),w=m("Dialog"),k=m("TransitionRoot"),C=m("ExclamationTriangleIcon"),D=m("AppLayout");return a(),M(D,null,{default:c(()=>[e("div",K,[e("div",O,[Q,e("div",W,[e("button",{onClick:t[0]||(t[0]=(...s)=>r.addSite&&r.addSite(...s)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-5 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600"},[i(y,{class:"-ml-0.5 mr-2 h-4 w-4","aria-hidden":"true"}),X])])]),n.all_sites.length>0?(a(),d("div",Y,[e("div",Z,[e("div",$,[e("div",ee,[i(S,{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),i(g,{modelValue:o.search_query,"onUpdate:modelValue":t[1]||(t[1]=s=>o.search_query=s),onKeyup:t[2]||(t[2]=s=>r.search()),onChange:t[3]||(t[3]=s=>r.search()),autocomplete:"off",id:"search",type:"text",placeholder:"Search Sites",class:"block w-full pl-10 font-medium",required:""},null,8,["modelValue"])])])])):u("",!0),e("div",te,[n.all_sites.length==0?(a(),d("div",se,[e("div",oe,[ie,le,ae,e("div",ne,[e("button",{onClick:t[4]||(t[4]=(...s)=>r.addSite&&r.addSite(...s)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-5 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600"},[i(y,{class:"-ml-0.5 mr-2 h-4 w-4","aria-hidden":"true"}),re])])])])):(a(),d("div",de,[e("table",ce,[me,e("tbody",ue,[(a(!0),d(B,null,E(o.display_sites,s=>(a(),d("tr",{key:s.id},[e("td",_e,[e("div",pe,[e("span",null,[h(_(s.name)+" "+_(" ")+" ",1),e("span",fe,"in "+_(s.display_state),1)])])]),e("td",he,[e("div",ye,_(s.villages_count),1)]),e("td",ge,_(s.create_date),1),e("td",xe,[e("a",{onClick:j=>r.editSite(s),href:"javascript:void(0)",class:"text-blue-600 hover:text-blue-900"},"Edit",8,ve)]),e("td",be,[e("a",{onClick:j=>r.deleteSite(s.name,s.id),href:"javascript:void(0)",class:"text-red-600 hover:text-red-900"},"Delete",8,we)])]))),128)),o.display_sites.length==0?(a(),d("tr",ke,Ce)):u("",!0)])])]))]),i(k,{as:"template",show:o.site_form.show_popup},{default:c(()=>[i(w,{as:"div",class:"relative z-10",onClose:t[9]||(t[9]=s=>o.site_form.show_popup=!1)},{default:c(()=>[i(f,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[De]),_:1}),e("div",je,[e("div",Te,[i(f,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:c(()=>[i(b,{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm"},{default:c(()=>[e("div",Ie,[e("div",Ne,[i(x,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:c(()=>[h(_(o.site_form.popup_title),1)]),_:1}),Ve]),e("div",Pe,[e("div",Le,[i(v,{for:"name",value:"Name"}),e("div",ze,[i(g,{modelValue:o.site_form.name.value,"onUpdate:modelValue":t[5]||(t[5]=s=>o.site_form.name.value=s),id:"site_name",type:"text",class:"block w-full font-medium",required:""},null,8,["modelValue"])]),o.site_form.name.error?(a(),d("p",Ae,"Please enter valid name")):u("",!0)]),e("div",Me,[i(v,{for:"site_state",value:"State"}),F(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>o.site_form.state.value=s),id:"site_state",class:"mt-1 block w-full rounded-md border border-gray-200 font-medium bg-gray-50 px-3 py-2 text-gray-900 placeholder-gray-400 focus:border-blue-500 focus:bg-white focus:outline-none focus:ring-blue-500 sm:text-sm"},Je,512),[[q,o.site_form.state.value]]),o.site_form.state.error?(a(),d("p",Ke,"Please enter valid state")):u("",!0)])])]),e("div",Oe,[o.site_form.processing?o.site_form.processing?(a(),d("button",Xe,$e)):u("",!0):(a(),d("button",{key:0,onClick:t[7]||(t[7]=(...s)=>r.validateForm&&r.validateForm(...s)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-blue-600 text-white hover:text-slate-100 hover:bg-blue-500 active:bg-blue-800 active:text-blue-100 focus-visible:outline-blue-600"},We)),o.site_form.processing?u("",!0):(a(),d("button",{key:2,onClick:t[8]||(t[8]=s=>o.site_form.show_popup=!1),type:"button",class:"mr-3 group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},tt))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),i(k,{as:"template",show:o.delete_form.show_popup},{default:c(()=>[i(w,{as:"div",class:"relative z-10",onClose:t[12]||(t[12]=s=>o.delete_form.show_popup=!1)},{default:c(()=>[i(f,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[st]),_:1}),e("div",ot,[e("div",it,[i(f,{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:c(()=>[i(b,{class:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-md"},{default:c(()=>[e("div",lt,[e("div",at,[e("div",nt,[i(C,{class:"h-6 w-6 text-red-600","aria-hidden":"true"})]),e("div",rt,[i(x,{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:c(()=>[h("Delete "+_(o.delete_form.site_name)+"?",1)]),_:1}),dt])])]),e("div",ct,[o.delete_form.processing?o.delete_form.processing?(a(),d("button",_t,ht)):u("",!0):(a(),d("button",{key:0,onClick:t[10]||(t[10]=(...s)=>r.deleteProcess&&r.deleteProcess(...s)),type:"button",class:"group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 bg-red-600 text-white hover:text-slate-100 hover:bg-red-500 active:bg-red-800 active:text-red-100 focus-visible:outline-red-600"},ut)),o.delete_form.processing?u("",!0):(a(),d("button",{key:2,onClick:t[11]||(t[11]=s=>o.delete_form.show_popup=!1),type:"button",class:"mr-3 group inline-flex items-center justify-center rounded-full py-1.5 px-6 text-sm font-semibold focus:outline-none focus-visible:outline-2 focus-visible:outline-offset-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 active:bg-gray-100 focus-visible:outline-blue-600"},gt))])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})}const Dt=G(J,[["render",xt]]);export{Dt as default};
